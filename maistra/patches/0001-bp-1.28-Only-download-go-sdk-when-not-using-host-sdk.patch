From e0bd584cac3bd39c0e638e80287cadf9e384de0c Mon Sep 17 00:00:00 2001
From: Jonh Wendell <jwendell@redhat.com>
Date: Thu, 1 Feb 2024 09:08:51 -0500
Subject: [PATCH] [bp/1.28] Only download go sdk when not using host sdk

Cherry-pick of https://github.com/envoyproxy/envoy/pull/32126

Signed-off-by: Jonh Wendell <jwendell@redhat.com>
---
 bazel/dependency_imports.bzl | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/bazel/dependency_imports.bzl b/bazel/dependency_imports.bzl
index 21ff0abc42..68e6d9bb5f 100644
--- a/bazel/dependency_imports.bzl
+++ b/bazel/dependency_imports.bzl
@@ -27,7 +27,8 @@ def envoy_dependency_imports(go_version = GO_VERSION, jq_version = JQ_VERSION, y
     rules_foreign_cc_dependencies()
     go_rules_dependencies()
     go_register_toolchains(go_version)
-    envoy_download_go_sdks(go_version)
+    if go_version != "host":
+        envoy_download_go_sdks(go_version)
     gazelle_dependencies(go_sdk = "go_sdk")
     apple_rules_dependencies()
     pip_dependencies()
-- 
2.45.2

